@{
    ViewData["Title"] = "Profile";
    var data = ViewData["UserProfileViewmodel"] as UserProfileViewmodel;
    Layout = null;
}
@model UserProfileViewmodel
<form asp-action="Profile" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label asp-for="userUpdateViewModel.FirstName"></label>
        <input asp-for="userUpdateViewModel.FirstName" value="@data.userUpdateViewModel.FirstName" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.FirstName" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="userUpdateViewModel.LastName"></label>
        <input asp-for="userUpdateViewModel.LastName" value="@data.userUpdateViewModel.LastName" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.LastName" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="userUpdateViewModel.Email"></label>
        <input asp-for="userUpdateViewModel.Email" value="@data.userUpdateViewModel.Email" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.Email" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="userUpdateViewModel.CurrentPassword"></label>
        <input asp-for="userUpdateViewModel.CurrentPassword" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.CurrentPassword" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="userUpdateViewModel.NewPassword"></label>
        <input asp-for="userUpdateViewModel.NewPassword" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.NewPassword" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="userUpdateViewModel.ConfirmPassword"></label>
        <input asp-for="userUpdateViewModel.ConfirmPassword" class="form-control" />
        <span asp-validation-for="userUpdateViewModel.ConfirmPassword" class="text-danger"></span>
    </div>
    <div class="form-group">
        <img src="~/img/data/@TempData["ProfilePhoto"]" alt="Profile Photo" style=" margin-top: 10px;" width="150" />

        <label asp-for="userUpdateViewModel.ProfilePhoto">Profile Photo</label>
        <input asp-for="userUpdateViewModel.ProfilePhoto" type="file" class="form-control-file" />
        <img id="profileImage" src="~/img/data/@TempData["ProfilePhoto"]" alt="Profile Photo" style="display: none; margin-top: 10px;" width="150" />
        <span asp-validation-for="userUpdateViewModel.ProfilePhoto" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>
<style>
    #profileImage {
        display: none;
        margin-top: 10px;
        width: 150px;
        height: 150px;
        object-fit: cover;
        border: 2px solid #ddd;
        border-radius: 5px;
    }

    .form-group label {
        font-weight: bold;
    }

    .form-control-file {
        margin-top: 5px;
    }

    .btn-primary {
        margin-top: 15px;
    }
</style>

<script>
    document.querySelector('input[type="file"]').addEventListener('change', function (event) {
        const [file] = event.target.files;
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.getElementById('profileImage');
                img.src = e.target.result;
                img.style.display = 'block';
            }
            reader.readAsDataURL(file);
        }
    });
</script>





@section Scripts {
    <script>


        document.querySelector(".nav-link.active").classList.remove("active");
        document.querySelector(".tab-pane.fade.show.active").classList.remove("show", "active");

        document.getElementById("@TempData["Tab"]-tab").classList.add("active");
        document.getElementById("@TempData["Tab"]").classList.add("show", "active");

        if ("@TempData["SuccessMessage"]" != "") {


            toastr["success"]("@TempData["SuccessMessage"]")

            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": false,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"

            }
        }
    </script>
}
